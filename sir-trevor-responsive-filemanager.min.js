/*! sir-trevor-responsive-filemanager 2014-03-20 */
(function(){var a;SirTrevor.DEFAULTS.Block.upload_options.html=['<div class="st-block__upload-container">','<input class="st-upload-filename" type="hidden"/>','<button class="st-upload-btn" type="button"><%= i18n.t("general:upload") %></button>',"</div>"].join("\n"),SirTrevor.DEFAULTS.Block.upload_options.filemanager={base_url:"/filemanager/dialog.php",width:"70%",height:"70%",maxWidth:1e3,minHeight:600,maxHeigh:900,type:"iframe",fitToView:!1,autoSize:!1,closeClick:!1,openEffect:"none",closeEffect:"none",padding:8},a=SirTrevor.BlockMixins.Uploadable.initializeUploadable,SirTrevor.BlockMixins.Uploadable.initializeUploadable=function(){var b;return a.apply(this,arguments),b=this.blockID+"-fileinput",this.$inputs.find("input.st-upload-filename").attr("id",b),this.$inputs.find(".st-upload-btn").on("click",function(a){return function(){var c;return c=$.extend({},a.upload_options.filemanager,{href:a.upload_options.filemanager.base_url+"?type=1&field_id="+b,afterClose:function(){return a.$inputs.find("input.st-upload-filename").trigger("change")}}),$.fancybox(c)}}(this))},SirTrevor.Blocks.Image.prototype.droppable=!1,SirTrevor.Locales.en.general.upload="choose a file",SirTrevor.Blocks.Image.prototype.onBlockRender=function(){return this.$inputs.find("input").on("change",function(a){return function(b){return b.target.value?(a.$editor.html($("<img>",{src:b.target.value})).show(),a.setData({file:{url:b.target.value.replace(/^.*\/\/[^\/]+/,"")}})):void 0}}(this))}}).call(this);